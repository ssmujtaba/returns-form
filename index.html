<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fergus Medical — Return Authorization Form</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;600&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="page-wrapper">
    <div class="form-container" id="formContainer">

        <!-- HEADER -->
        <header class="form-header">
            <div class="logo-lockup">
                <div class="logo-icon">
                    <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="4" y="4" width="18" height="18" rx="3" stroke="#005b7f" stroke-width="2.5"/>
                        <rect x="26" y="4" width="18" height="18" rx="3" stroke="#005b7f" stroke-width="2.5"/>
                        <rect x="4" y="26" width="18" height="18" rx="3" stroke="#005b7f" stroke-width="2.5"/>
                        <rect x="26" y="26" width="18" height="18" rx="3" stroke="#005b7f" stroke-width="2.5"/>
                        <circle cx="13" cy="13" r="4" fill="#005b7f"/>
                        <circle cx="35" cy="13" r="4" fill="#005b7f" opacity="0.4"/>
                        <circle cx="13" cy="35" r="4" fill="#005b7f" opacity="0.4"/>
                        <circle cx="35" cy="35" r="4" fill="#005b7f"/>
                    </svg>
                </div>
                <div class="logo-text">
                    <span class="logo-fergus">FERGUS</span>
                    <span class="logo-medical">MEDICAL</span>
                </div>
            </div>
            <div class="header-divider"></div>
            <h1 class="form-title">Return Authorization Form</h1>
            <p class="form-subtitle" id="formSubtitle">
                All returns require a return authorization number issued by Fergus Medical. 
                To receive a return number, please complete this form and submit it to 
                <strong>orders@fergus-medical.com</strong>.
            </p>
        </header>

        <!-- CUSTOMER INFO -->
        <section class="form-section" id="customerSection">
            <div class="section-label">Customer Information</div>
            <div class="fields-grid">
                <div class="field-group full">
                    <label class="field-label">Company Name <span class="req">*</span></label>
                    <input type="text" id="companyName" name="Company_Name" class="field-input customer-field" required placeholder="e.g. Calumet Quick Care">
                </div>
                <div class="field-group full">
                    <label class="field-label">Provider Name <span class="req">*</span></label>
                    <input type="text" id="providerName" name="Provider_Name" class="field-input customer-field" required placeholder="e.g. Stephanie Dolph">
                </div>
                <div class="field-group half">
                    <label class="field-label">Fergus Medical Invoice #</label>
                    <input type="text" id="invoiceNumber" name="Invoice_Number" class="field-input customer-field" placeholder="e.g. INV08311">
                </div>
                <div class="field-group half">
                    <label class="field-label">Telephone <span class="req">*</span></label>
                    <input type="tel" id="phoneNumber" name="Phone_Number" class="field-input customer-field" required placeholder="e.g. (219) 803-0379">
                </div>
            </div>
        </section>

        <!-- RETURN GOODS PROCESS -->
        <section class="process-section" id="processSection">
            <div class="process-header">
                <strong>RETURN GOODS PROCESS</strong> — To return Fergus Medical products, the Customer shall:
            </div>
            <ul class="process-list">
                <li>Submit this Return Authorization to Fergus Medical's Ordering department by emailing <strong>orders@fergus-medical.com</strong> concerning unused Products within thirty (30) days from the date the product was delivered to the Customer.</li>
                <li>Customer must return the Product to Company within fourteen (14) business days of the date a Return Authorization was granted.</li>
                <li>Product unit(s) must be:
                    <ul>
                        <li>Unopened, in their original packaging, and without having been damaged.</li>
                        <li>Stored at ambient temperature ranging from 15–30°C as displayed on the product's packaging.</li>
                    </ul>
                </li>
                <li>A completed copy of the Return Authorization must be included in the package with the unit(s) being returned.</li>
                <li>The Return Authorization number must appear on the outside of the return package.</li>
            </ul>
            <div class="process-return-address">
                <div class="return-email">
                    Please return this form via email to: <strong>ORDERS@FERGUS-MEDICAL.COM</strong>
                </div>
                <div class="return-address-block">
                    <div class="return-address-label">Please return the product to:</div>
                    <address>
                        Fergus Medical, Receiving<br>
                        9001 E San Victor Dr.<br>
                        #2019<br>
                        Scottsdale, AZ 85258
                    </address>
                </div>
            </div>
        </section>

        <!-- PRODUCT INFORMATION -->
        <section class="form-section">
            <div class="section-label">Product Information</div>
            <p class="product-instructions">
                Please enter the product information below for each item you wish to return. 
                Please state the reason for the return, provide the tissue identification and 
                the name/size of <u>EACH</u> the product.
            </p>
            <p class="product-warning">
                ⚠ Returns must include the printed return authorization form in the return box. 
                Physical returns missing this form will be shipped back to customer.
            </p>

            <div class="table-wrapper">
                <table id="itemsTable">
                    <thead>
                        <tr>
                            <th>Reason for Return <span class="req">*</span></th>
                            <th>Product / Size <span class="req">*</span></th>
                            <th>Tissue ID <span class="req">*</span></th>
                            <th class="action-col" id="actionColHeader"></th>
                        </tr>
                    </thead>
                    <tbody id="tableBody"></tbody>
                </table>
            </div>

            <button type="button" class="btn-add-row" id="addRowBtn" onclick="addRow()">
                <span class="btn-add-icon">+</span> Add Product Row
            </button>
        </section>

        <!-- TRACKING (FERGUS USE ONLY) -->
        <section class="form-section tracking-section">
            <div class="section-label">Return Tracking</div>
            <div class="field-group full">
                <label class="field-label internal-label">
                    <span class="internal-badge">FERGUS USE ONLY</span>
                    Return Tracking # <span class="req">*</span>
                </label>
                <input type="text" id="trackingNumber" name="Internal_Tracking_Number" 
                       class="field-input internal-field" readonly 
                       placeholder="Filled in by Fergus Medical staff">
            </div>
        </section>

        <!-- INTERNAL USE ONLY -->
        <section class="internal-section">
            <div class="internal-section-header">
                <span class="internal-section-badge">INTERNAL USE ONLY</span>
                Return Approval
            </div>
            <div class="internal-grid">
                <div class="field-group">
                    <label class="field-label internal-label">Authorization Request #</label>
                    <input type="text" id="authRequestNum" name="Internal_Auth_Request_Num" 
                           class="field-input internal-field" readonly 
                           placeholder="e.g. RET-022426-2">
                </div>
                <div class="field-group">
                    <label class="field-label internal-label">Return Authorization Approval</label>
                    <input type="text" id="authApproval" name="Internal_Approval_Sign" 
                           class="field-input internal-field" readonly 
                           placeholder="Authorized signature / name">
                </div>
                <div class="field-group">
                    <label class="field-label internal-label">Date</label>
                    <input type="text" id="authDate" name="Internal_Date" 
                           class="field-input internal-field" readonly 
                           placeholder="MM/DD/YY">
                </div>
            </div>
        </section>

        <!-- SUBMIT -->
        <div class="submit-area" id="submitArea">
            <button type="button" class="btn-submit" id="submitBtn" onclick="handleSubmit()">
                <span id="submitBtnText">Submit Return Request</span>
                <span id="submitBtnSpinner" class="spinner" style="display:none;">⟳</span>
            </button>
            <p class="submit-note">
                By submitting, you confirm all product information is accurate. 
                A Fergus Medical representative will follow up via email.
            </p>
        </div>

        <!-- STAFF SAVE BUTTON (hidden until staff mode) -->
        <div class="submit-area" id="staffSaveArea" style="display:none;">
            <button type="button" class="btn-submit btn-staff-save" onclick="handleStaffSave()">
                Save Internal Notes &amp; Complete Authorization
            </button>
        </div>

        <!-- STATUS MESSAGES -->
        <div id="errorMsg" class="status-msg error-msg" style="display:none;"></div>
        <div id="successMsg" class="status-msg success-msg" style="display:none;"></div>

    </div>
</div>

<!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script src="script.js"></script>
</body>
</html>
